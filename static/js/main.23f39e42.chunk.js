(this["webpackJsonpsimple-tasks"]=this["webpackJsonpsimple-tasks"]||[]).push([[0],{27:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),s=n(22),c=n.n(s),u=(n(27),n(3)),i=n.n(u),o=n(7),l=n(6),j=(n(29),n(11)),b=n(19),p=(n(41),function(){b.a.initializeApp({apiKey:"AIzaSyDPD5b6fyqQh5J-FnZMYYgpp_L-CQubjIo",authDomain:"simple-tasks-734ac.firebaseapp.com",projectId:"simple-tasks-734ac",storageBucket:"simple-tasks-734ac.appspot.com",messagingSenderId:"373484943675",appId:"1:373484943675:web:b52e1585d6b1d56d3c1f1e"});var e=b.a.firestore(),t=function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").get();case 2:return t.abrupt("return",t.sent.docs.map((function(e){return Object(j.a)({userName:e.id},e.data())})));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(o.a)(i.a.mark((function t(n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.collection("users").doc(n).get();case 2:if(!(r=t.sent).exists){t.next=5;break}return t.abrupt("return",Object(j.a)({userName:r.id},r.data()));case 5:throw new Error("Username does not exist");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(){var t=Object(o.a)(i.a.mark((function t(r,a,s,c){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(r);case 3:return t.abrupt("return",!1);case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,e.collection("users").doc(r).set({name:a,email:s,password:c,tasks:[],role:"user"});case 10:return t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),a=function(){var e=Object(o.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(r),e.t0=console,e.next=5,n(t);case 5:return e.t1=e.sent.password,e.t2=r,e.t3=e.t1===e.t2,e.t0.log.call(e.t0,e.t3),e.next=11,n(t);case 11:return e.t4=e.sent.password,e.t5=r,e.abrupt("return",e.t4===e.t5);case 16:return e.prev=16,e.t6=e.catch(0),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),s=function(){var t=Object(o.a)(i.a.mark((function t(r,a){var s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(r);case 2:return s=t.sent.tasks,t.next=5,e.collection("users").doc(r).set({tasks:s.concat(a)},{merge:!0});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),c=function(){var t=Object(o.a)(i.a.mark((function t(r,a){var s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(r);case 2:return s=t.sent.tasks,t.next=5,e.collection("users").doc(r).set({tasks:s.filter((function(e,t){return t!==a}))},{merge:!0});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{getUsers:t,getUser:n,createUser:r,login:a,addTask:s,deleteTask:c}}()),d=(n(30),n(1)),f=function(e){var t=Object(r.useState)([]),n=Object(l.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){(function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,p.getUsers();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(d.jsxs)("div",{className:"admin-page",children:[Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("h1",{children:"Admin"}),Object(d.jsx)("button",{className:"logout-button",onClick:e.logout,children:"Sair"})]}),Object(d.jsx)("h2",{children:"Usu\xe1rios"}),a.map((function(t,n){return Object(d.jsx)("div",{className:"admin-user-item",onClick:function(n){return e.redirectToUserDetailPage(t)},children:Object(d.jsx)("span",{children:t.userName})},n)}))]})},h=(n(32),function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(""),u=Object(l.a)(c,2),j=u[0],b=u[1],p=Object(r.useState)(""),f=Object(l.a)(p,2),h=f[0],O=f[1],x=function(){var t=Object(o.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==a.length&&0!==j.length){t.next=4;break}O("Dados inv\xe1lidos"),t.next=8;break;case 4:return t.next=6,e.login(a,j);case 6:n=t.sent,O(n?"":"Dados inv\xe1lidos");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"login",children:[Object(d.jsx)("h1",{children:"Login"}),Object(d.jsx)("input",{type:"text",placeholder:"Nome de usu\xe1rio",value:a,onChange:function(e){return s(e.target.value)}}),Object(d.jsx)("input",{type:"password",placeholder:"Senha",value:j,onChange:function(e){return b(e.target.value)}}),Object(d.jsx)("span",{className:"login-error-span",children:h}),Object(d.jsx)("button",{onClick:function(e){return x()},className:"enter-button",children:"Entrar"}),Object(d.jsx)("button",{onClick:function(t){return e.redirectToSignUp()},className:"not-a-user-button",children:"Ainda n\xe3o tenho cadastro"})]})}),O=(n(33),function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(""),u=Object(l.a)(c,2),j=u[0],b=u[1],p=Object(r.useState)(""),f=Object(l.a)(p,2),h=f[0],O=f[1],x=Object(r.useState)(""),m=Object(l.a)(x,2),v=m[0],g=m[1],k=Object(r.useState)(""),w=Object(l.a)(k,2),N=w[0],S=w[1],y=Object(r.useState)(""),C=Object(l.a)(y,2),U=C[0],I=C[1],T=Object(r.useState)(!1),A=Object(l.a)(T,2),D=A[0],E=A[1],F=function(){var t=Object(o.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(![j,a,h,v,N].some((function(e){return 0===e.length}))){t.next=4;break}I("Preencha todos os dados"),t.next=13;break;case 4:if(v===N){t.next=8;break}I("Senhas n\xe3o batem"),t.next=13;break;case 8:return t.next=10,e.signUp(j,a,h,v);case 10:n=t.sent,I(n?"":"Usu\xe1rio j\xe1 existe"),E(n);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return D?Object(d.jsxs)("div",{className:"sign-up",children:[Object(d.jsx)("span",{className:"sign-up-successful-span",children:"Usu\xe1rio cadastrado com sucesso"}),Object(d.jsx)("button",{onClick:function(t){return e.redirectToLogin()},children:"Fazer login"})]}):Object(d.jsxs)("div",{className:"sign-up",children:[Object(d.jsx)("input",{className:"name-input",type:"text",placeholder:"Nome",value:a,onChange:function(e){return s(e.target.value)}}),Object(d.jsx)("input",{type:"text",placeholder:"Nome de usu\xe1rio",value:j,onChange:function(e){return b(e.target.value)}}),Object(d.jsx)("input",{type:"email",placeholder:"E-mail",value:h,onChange:function(e){return O(e.target.value)}}),Object(d.jsx)("input",{type:"password",placeholder:"Senha",value:v,onChange:function(e){return g(e.target.value)}}),Object(d.jsx)("input",{type:"password",placeholder:"Confirme a senha",value:N,onChange:function(e){return S(e.target.value)}}),Object(d.jsx)("span",{className:"sign-up-error-span",children:U}),Object(d.jsx)("button",{onClick:F,children:"Cadastrar-se"})]})}),x=(n(34),n(16)),m=function(e){return Object(d.jsxs)("div",{className:"user-detail-page",children:[Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("button",{className:"back-button",onClick:e.back,children:Object(d.jsx)(x.a,{icon:"arrow-left"})}),Object(d.jsx)("h1",{children:e.userInfo.userName})]}),Object(d.jsxs)("div",{className:"user-info-section",children:[Object(d.jsxs)("div",{className:"user-info-name-section",children:[Object(d.jsx)("label",{htmlFor:"name",children:"Nome: "}),Object(d.jsx)("span",{children:e.userInfo.name})]}),Object(d.jsxs)("div",{className:"user-info-email-section",children:[Object(d.jsx)("label",{htmlFor:"email",children:"E-mail: "}),Object(d.jsx)("span",{children:e.userInfo.email})]}),Object(d.jsxs)("div",{className:"user-info-role-section",children:[Object(d.jsx)("label",{htmlFor:"role",children:"Privil\xe9gios: "}),Object(d.jsx)("span",{children:"admin"===e.userInfo.role?"Administrador":"Usu\xe1rio"})]}),Object(d.jsxs)("div",{className:"user-info-tasks-section ",children:[Object(d.jsx)("label",{htmlFor:"tasks",children:"Tarefas: "}),Object(d.jsx)("ul",{children:e.userInfo.tasks.map((function(e,t){return Object(d.jsx)("li",{className:"user-info-task-item",children:Object(d.jsx)("span",{children:e})},t)}))})]})]})]})},v=(n(39),function(e){var t=Object(r.useState)(null),n=Object(l.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(!1),u=Object(l.a)(c,2),b=u[0],f=u[1],h=Object(r.useState)(""),O=Object(l.a)(h,2),m=O[0],v=O[1];Object(r.useEffect)((function(){(function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,p.getUser(e.user);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.user]);var g=function(){var t=Object(o.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.deleteTask(e.user,n);case 2:s((function(e){return Object(j.a)(Object(j.a)({},e),{},{tasks:e.tasks.filter((function(e,t){return t!==n}))})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.addTask(e.user,m);case 2:s((function(e){return Object(j.a)(Object(j.a)({},e),{},{tasks:e.tasks.concat(m)})})),v(""),f(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=Object(d.jsxs)("div",{className:"add-task-section",children:[Object(d.jsx)("input",{type:"text",className:"add-new-task-input",value:m,onChange:function(e){return v(e.target.value)}}),Object(d.jsx)("button",{onClick:k,children:"Adicionar"})]}),N=null!==a?Object(d.jsxs)("div",{className:"tasks-section",children:[Object(d.jsx)("h2",{children:"Tarefas"}),a.tasks.map((function(e,t){return Object(d.jsxs)("div",{className:"task",children:[Object(d.jsx)("span",{children:e}),Object(d.jsx)("button",{className:"delete-task-button",onClick:function(e){return g(t)},children:Object(d.jsx)(x.a,{icon:"trash-alt",color:"black",size:"lg"})})]},t)})),b?w:Object(d.jsx)("button",{className:"add-task-button",onClick:function(e){return f(!0)},children:Object(d.jsx)(x.a,{icon:"plus-circle",color:"white",size:"lg"})})]}):null;return Object(d.jsxs)("div",{className:"user-page",children:[null!==a?Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("h1",{className:"user-page-header",children:a.name}),Object(d.jsx)("button",{className:"logout-button",onClick:e.logout,children:"Sair"})]}):null,N]})}),g=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)("login"),c=Object(l.a)(s,2),u=c[0],j=c[1],b=Object(r.useState)(null),x=Object(l.a)(b,2),g=x[0],k=x[1],w=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.login(t,n);case 2:if(!e.sent){e.next=9;break}return e.next=5,p.getUser(t);case 5:return r=e.sent.role,a(t),j("admin"!==r?"user-page":"admin-page"),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.createUser(t,n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),S=function(){j("login"),a(null)};return Object(d.jsx)("div",{className:"App",children:"login"===u?Object(d.jsx)(h,{login:w,redirectToSignUp:function(){j("sign-up")}}):"sign-up"===u?Object(d.jsx)(O,{signUp:N,redirectToLogin:function(){j("login")}}):"user-page"===u?Object(d.jsx)(v,{user:n,logout:S}):"admin-page"===u?Object(d.jsx)(f,{redirectToUserDetailPage:function(e){k(e),j("user-detail-page")},logout:S}):Object(d.jsx)(m,{userInfo:g,back:function(){j("admin-page")}})})},k=n(13),w=n(17);k.b.add(w.d,w.b,w.c,w.a),c.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(g,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.23f39e42.chunk.js.map